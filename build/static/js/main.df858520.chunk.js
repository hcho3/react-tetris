(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{17:function(e,t,r){},18:function(e,t,r){"use strict";r.r(t);var n=r(4),i=r(3),a=r(7),o=r(8),s=r(10),c=r(9),u=r(0),h=r(1),l=r.n(h),p=r(11),v=r.n(p),f={NoShape:0,ZShape:1,SShape:2,LineShape:3,TShape:4,SquareShape:5,LShape:6,MirroredLShape:7};Object.freeze(f);var d=20,m=22,y=10,b=[[[0,0],[0,0],[0,0],[0,0]],[[0,-1],[0,0],[-1,0],[-1,1]],[[0,-1],[0,0],[1,0],[1,1]],[[0,-1],[0,0],[0,1],[0,2]],[[-1,0],[0,0],[1,0],[0,1]],[[0,0],[1,0],[0,1],[1,1]],[[-1,-1],[0,-1],[0,0],[0,1]],[[1,-1],[0,-1],[0,0],[0,1]]],j=["#000000","#CC6666","#66CC66","#6666CC","#CCCC66","#CC66CC","#66CCCC","#DAAA00"];function O(e,t){var r=e,n=e+Math.min.apply(Math,Object(i.a)(t.map((function(e){return e[0]})))),a=e+Math.max.apply(Math,Object(i.a)(t.map((function(e){return e[0]}))));return n<0&&(r+=-n),a>=y&&(r-=a-9),r}function k(e,t,r,i){var a,o=Object(n.a)(e.coords);try{for(o.s();!(a=o.n()).done;){var s=a.value,c=s[0]+r,u=s[1]+i;if(c<0||c>=y||u<0||u>=m)return!1;if(t[u][c]!==f.NoShape)return!1}}catch(h){o.e(h)}finally{o.f()}return!0}r(17);var S=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"render",value:function(){return Object(u.jsx)("div",{style:{backgroundColor:this.props.color,width:d,height:d,position:"absolute",top:this.props.y*d,left:this.props.x*d}})}}]),r}(l.a.Component),x=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).state={isFallingFinished:!1,numLinesRemoved:0,currentPiece:null,isGameOver:!1,board:Array(m).fill(null).map((function(){return Array(y).fill(f.NoShape)}))},n}return Object(o.a)(r,[{key:"start",value:function(){this.newPiece()}},{key:"gameOver",value:function(){this.setState({currentPiece:null,isGameOver:!0}),this.stopTimer()}},{key:"newPiece",value:function(){var e,t,r=this.state.board,n=(e=1,t=Object.keys(f).length,Math.floor(Math.random()*Math.floor(t-e))+e),a=b[n].slice(),o=Math.floor(5)+1,s=Math.max(0,-Math.min.apply(Math,Object(i.a)(a.map((function(e){return e[1]}))))),c={shape:n,coords:a,x:o,y:s};k(c,r,o,s)?this.setState({currentPiece:c}):(this.commitPieceToBoard(c),this.gameOver())}},{key:"tryMove",value:function(e,t){var r=this.state.currentPiece,n=this.state.board;if(!r)return!0;var i=r.x+e,a=r.y+t,o=k(r,n,i,a);return o&&this.setState({currentPiece:Object.assign({},r,{x:i,y:a})}),o}},{key:"rotateLeft",value:function(){var e=this.state.currentPiece;if(e&&e.shape!==f.SquareShape){var t=e.coords.map((function(e){return[e[1],-e[0]]})),r=O(e.x,t);this.setState({currentPiece:Object.assign({},e,{coords:t,x:r})})}}},{key:"rotateRight",value:function(){var e=this.state.currentPiece;if(e&&e.shape!==f.SquareShape){var t=e.coords.map((function(e){return[-e[1],e[0]]})),r=O(e.x,t);this.setState({currentPiece:Object.assign({},e,{coords:t,x:r})})}}},{key:"dropDown",value:function(){var e=this.state.currentPiece;if(e){for(var t=e.y;t<m&&this.tryMove(0,1);)t++;this.pieceDropped()}}},{key:"oneLineDown",value:function(){this.tryMove(0,1)||this.pieceDropped()}},{key:"commitPieceToBoard",value:function(e){var t=this.state.board.map((function(t,r){return t.map((function(t,i){var a,o=Object(n.a)(e.coords);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(i===e.x+s[0]&&r===e.y+s[1])return e.shape}}catch(c){o.e(c)}finally{o.f()}return t}))}));this.setState({board:t})}},{key:"pieceDropped",value:function(){var e=this.state.currentPiece;this.commitPieceToBoard(e),this.removeFullLines(),this.state.isFallingFinished||this.newPiece()}},{key:"removeFullLines",value:function(){for(var e=this.state.numLinesRemoved,t=this.state.board,r=[],n=0;n<m;n++){for(var i=!0,a=0;a<y;a++)if(t[n][a]===f.NoShape){i=!1;break}i&&r.push(n)}for(var o=t.map((function(e){return e.map((function(e){return e}))})),s=0,c=r;s<c.length;s++)for(var u=c[s];u>0;u--)for(var h=0;h<y;h++)o[u][h]=o[u-1][h];r.length>0&&this.setState({numLinesRemoved:e+r.length,isFallingFinished:!0,currentPiece:null,board:o})}},{key:"handleKeyDown",value:function(e){switch(e.code){case"ArrowLeft":this.tryMove(-1,0);break;case"ArrowRight":this.tryMove(1,0);break;case"ArrowDown":this.rotateRight();break;case"ArrowUp":this.rotateLeft();break;case"Space":this.dropDown()}}},{key:"handleTimerTick",value:function(){this.state.isFallingFinished?(this.setState({isFallingFinished:!1}),this.newPiece()):this.oneLineDown()}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",(function(t){return e.handleKeyDown(t)}),!1),this.timer=setInterval((function(){return e.handleTimerTick()}),150),this.start()}},{key:"componentWillUnmount",value:function(){var e=this;document.addEventListener("keydown",(function(t){return e.handleKeyDown(t)}),!1),this.stopTimer()}},{key:"stopTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"render",value:function(){for(var e=this.state.currentPiece,t=this.state.board,r=this.state.isGameOver?Object(u.jsx)("strong",{children:"Game Over"}):Object(u.jsxs)("span",{children:["Score: ",this.state.numLinesRemoved]}),n=[],i=0;i<m;i++)for(var a=0;a<y;a++){var o=t[i][a];o!==f.NoShape&&n.push(Object(u.jsx)(S,{x:a,y:i,color:j[o]},i*y+a))}var s=null;return e&&(s=e.coords.map((function(t,r){return Object(u.jsx)(S,{x:e.x+t[0],y:e.y+t[1],color:j[e.shape]},n.length+r)}))),[Object(u.jsxs)("div",{id:"board",style:{position:"absolute",top:0,left:0,width:"".concat(200,"px"),height:"".concat(440,"px"),backgroundColor:"#EEEEEE"},children:[n,s]},"board"),Object(u.jsxs)("div",{id:"status",style:{position:"absolute",top:0,left:"".concat(200,"px"),padding:"15px",fontFamily:"Helvetica, sans-serif"},children:[Object(u.jsx)("h2",{style:{margin:0,fontSize:"15pt"},children:"Tetris"}),Object(u.jsx)("p",{children:r})]},"status")]}}]),r}(l.a.Component);v.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.df858520.chunk.js.map